"use strict";$(function(){var r=[];draw(r),$("#canvas").on("click",function(){draw(r)});var n=$("#uname"),l=$(".p1"),a=$("#upwd"),u=$(".p2"),i=$("#uupwd"),f=$(".p3"),x=$("#code"),p=$(".p4"),d=$(".btn");$.ajax({url:"../api/register1.php",success:function(t){var o,e,c,s=JSON.parse(t);n.focus(function(){l.css({display:"block",color:"#333"}).text("请输入用户名")}).blur(function(){o=$(this).val();for(var t=0;t<s.length;t++){if(o==s[t].uname){l.text("用户名不可用").css({color:"red"});break}""==o?l.text("用户名不能为空").css({color:"red"}):l.text("用户名可用").css({color:"green"})}}),a.focus(function(){u.css({display:"block",color:"#333"}).text("请设置6到16位登录密码")}).blur(function(){16<(e=$(this).val()).length||e.length<6?u.text("请设置6到16位登录密码").css({color:"red"}):u.text("密码设置成功").css({color:"green"})}),i.focus(function(){f.css({display:"block",color:"#333"}).text("请重复输入密码")}).blur(function(){(c=$(this).val()).length<=16&&6<=c.length&&(c==e?f.text("密码一致").css({color:"green"}):f.text("密码不一致").css({color:"red"}))}),x.focus(function(){p.css({display:"block",color:"#333"}).text("请填写图片中的字符，不区分大小写")}).blur(function(){var t=$(".input-val").val().toLowerCase(),c=r.join("");""==t?p.text("验证码不能为空").css({color:"red"}):t==c?p.text("验证码正确").css({color:"green"}):p.text("验证码不正确").css({color:"red"})}),d.click(function(){if("用户名可用"==l.text()&&"密码设置成功"==u.text()&&"密码一致"==f.text()&&"验证码正确"==p.text()){var t=o,c=e;return $.ajax({url:"../api/register2.php",data:{uname:t,pwd:c},success:function(t){console.log(提交成功)}}),!(location.href="../html/login.html")}})}})});